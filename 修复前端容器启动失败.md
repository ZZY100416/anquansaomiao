# 修复前端容器启动失败

## 问题

前端容器状态显示 `Exit 1`（启动失败），需要查看日志并重启。

## 立即修复（在Ubuntu上执行）

### 步骤1: 查看前端日志（最重要）

```bash
# 查看前端完整日志
docker-compose logs frontend

# 查看最近50行日志
docker-compose logs --tail=50 frontend
```

### 步骤2: 重启前端容器

```bash
cd ~/projects/anquansaomiao

# 重启前端（应用最新的代码修改）
docker-compose restart frontend

# 如果重启失败，删除并重新创建
docker rm -f uss-frontend
docker-compose up -d frontend

# 查看日志
docker-compose logs -f frontend
```

### 步骤3: 如果还是失败，重新构建

```bash
# 重新构建前端
docker-compose build frontend

# 启动
docker-compose up -d frontend

# 查看日志
docker-compose logs -f frontend
```

## 常见错误及解决方案

### 错误1: npm start失败

**症状**：日志显示npm错误

**解决**：
```bash
# 进入容器检查
docker-compose run --rm frontend sh

# 在容器内
cd /app
npm install
npm start
```

### 错误2: 端口被占用

**症状**：日志显示端口3000已被占用

**解决**：
```bash
# 检查端口
sudo netstat -tlnp | grep 3000

# 如果被占用，停止占用端口的进程或修改docker-compose.yml中的端口
```

### 错误3: 编译错误

**症状**：日志显示编译错误

**解决**：
- 检查代码语法错误
- 查看具体错误信息并修复

## 验证

```bash
# 1. 检查容器状态（应该显示Up）
docker-compose ps frontend

# 2. 查看日志（应该看到编译成功）
docker-compose logs --tail=20 frontend

# 应该看到：
# Compiled successfully!
# webpack compiled
# Local: http://localhost:3000

# 3. 测试前端访问
curl http://localhost:3000
```

## 快速修复命令

```bash
cd ~/projects/anquansaomiao

# 1. 查看日志
docker-compose logs --tail=30 frontend

# 2. 删除前端容器
docker rm -f uss-frontend

# 3. 重新启动
docker-compose up -d frontend

# 4. 查看启动日志
docker-compose logs -f frontend
```

