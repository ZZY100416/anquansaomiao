# 统一安全扫描平台 - 用户使用手册

## 目录

1. [系统概述](#系统概述)
2. [快速开始](#快速开始)
3. [功能说明](#功能说明)
4. [操作指南](#操作指南)
5. [最佳实践](#最佳实践)

## 系统概述

统一安全扫描平台是一个集成化的DevSecOps安全工具，提供：

- **代码安全扫描（SAST）**: 使用Semgrep进行静态代码分析
- **依赖漏洞扫描（SCA）**: 使用OWASP Dependency-Check扫描第三方依赖
- **容器镜像扫描**: 使用Trivy扫描Docker镜像安全漏洞
- **统一管理界面**: Web界面管理所有扫描任务和结果
- **报告生成**: 支持PDF和HTML格式的安全报告

## 快速开始

### 1. 登录系统

访问 http://localhost:3000，使用管理员账号登录：

- 用户名: `admin`
- 密码: `admin123`

> **注意**: 首次登录后请立即修改密码

### 2. 创建项目

1. 点击左侧菜单 "项目管理"
2. 点击 "新建项目" 按钮
3. 填写项目信息：
   - 项目名称（必填）
   - 项目描述（可选）
   - 代码仓库地址（可选）
   - 项目类型（如: java, python, nodejs, docker）
4. 点击 "确定" 保存

### 3. 创建扫描任务

1. 点击左侧菜单 "扫描任务"
2. 点击 "新建扫描" 按钮
3. 选择项目和扫描类型：
   - **SAST**: 静态代码扫描
   - **SCA**: 依赖漏洞扫描
   - **容器扫描**: Docker镜像扫描
4. 配置扫描参数（如容器扫描需要镜像名称）
5. 点击 "确定" 启动扫描

### 4. 查看扫描结果

1. 扫描完成后，在扫描任务列表中查看状态
2. 点击扫描任务查看详细结果
3. 结果按严重级别分类显示：
   - 严重（Critical）
   - 高危（High）
   - 中危（Medium）
   - 低危（Low）
   - 信息（Info）

### 5. 生成报告

1. 在扫描结果页面点击 "生成报告"
2. 选择报告格式（HTML或PDF）
3. 下载报告文件

## 功能说明

### 仪表盘

仪表盘提供系统概览信息：

- **项目总数**: 当前管理的项目数量
- **扫描任务**: 所有扫描任务总数
- **已完成扫描**: 成功完成的扫描数量
- **发现漏洞**: 所有扫描发现的漏洞总数
- **漏洞分布图**: 按严重级别展示的漏洞分布饼图

### 项目管理

#### 创建项目

项目用于组织和管理相关的扫描任务。一个项目可以包含多个扫描任务。

**项目信息字段说明**:

- **项目名称**: 项目的唯一标识名称
- **项目描述**: 项目的详细描述信息
- **代码仓库地址**: Git仓库URL，用于代码扫描
- **项目类型**: 项目使用的技术栈（java, python, nodejs等）

#### 编辑项目

点击项目列表中的 "编辑" 按钮可以修改项目信息。

#### 删除项目

点击 "删除" 按钮可以删除项目。**注意**: 删除项目会同时删除该项目下的所有扫描任务和结果。

### 扫描任务

#### 扫描类型说明

##### 1. SAST（静态应用安全测试）

扫描源代码中的安全漏洞，无需运行应用。

**适用场景**:
- 代码审查
- CI/CD集成
- 开发阶段安全检测

**支持的语言**:
- Python
- JavaScript/TypeScript
- Java
- Go
- 等（Semgrep支持的语言）

##### 2. SCA（软件组成分析）

扫描项目依赖的第三方库中的已知漏洞。

**适用场景**:
- 依赖库安全检查
- 许可证合规检查
- 漏洞修复追踪

**支持的包管理器**:
- Maven (Java)
- npm (Node.js)
- pip (Python)
- Gradle (Java)
- 等

##### 3. 容器镜像扫描

扫描Docker镜像中的安全漏洞和配置问题。

**适用场景**:
- 镜像发布前检查
- 运行时安全评估
- 合规性检查

**扫描配置示例**:

```json
{
  "image_name": "nginx:latest"
}
```

#### 扫描状态

- **等待中（Pending）**: 扫描任务已创建，等待执行
- **运行中（Running）**: 扫描正在进行中
- **已完成（Completed）**: 扫描成功完成
- **失败（Failed）**: 扫描执行失败

#### 查看扫描结果

1. 在扫描任务列表中，点击扫描任务
2. 查看结果详情：
   - 漏洞标题和描述
   - 文件路径和行号（SAST）
   - CVE编号（SCA/容器扫描）
   - 包名和版本信息
   - 修复建议

### 报告中心

#### 生成报告

1. 选择要生成报告的扫描任务
2. 点击 "生成报告"
3. 选择报告格式：
   - **HTML**: 网页格式，适合在线查看
   - **PDF**: 便携文档格式，适合打印和归档

#### 报告内容

报告包含以下信息：

- 扫描任务基本信息
- 漏洞统计摘要
- 按严重级别分类的漏洞列表
- 详细漏洞信息
- 修复建议

## 操作指南

### 工作流程

#### 典型扫描流程

1. **创建项目**
   ```
   项目管理 → 新建项目 → 填写信息 → 保存
   ```

2. **创建扫描任务**
   ```
   扫描任务 → 新建扫描 → 选择项目和类型 → 配置参数 → 启动
   ```

3. **查看结果**
   ```
   扫描任务 → 选择任务 → 查看结果 → 分析漏洞
   ```

4. **生成报告**
   ```
   报告中心 → 选择扫描 → 生成报告 → 下载
   ```

### 扫描配置示例

#### SAST扫描配置

```json
{
  "rules": "auto",
  "exclude": ["node_modules", "venv"]
}
```

#### SCA扫描配置

```json
{
  "package_managers": ["npm", "pip"],
  "fail_on_cvss": 7.0
}
```

#### 容器扫描配置

```json
{
  "image_name": "myapp:1.0.0",
  "severity": ["CRITICAL", "HIGH"]
}
```

### 批量操作

#### 批量扫描

1. 为同一项目创建多个不同类型的扫描任务
2. 系统会并行执行扫描（根据资源限制）
3. 在仪表盘查看汇总结果

#### 结果对比

1. 对同一项目的不同版本进行扫描
2. 对比不同扫描的结果
3. 追踪漏洞修复进度

## 最佳实践

### 1. 项目组织

- **按应用分组**: 每个应用创建一个项目
- **使用描述**: 为项目添加清晰的描述信息
- **规范命名**: 使用统一的命名规范

### 2. 扫描策略

#### 开发阶段

- **频繁扫描**: 每次提交代码后进行SAST扫描
- **早期发现**: 在开发阶段发现并修复漏洞
- **集成CI/CD**: 自动化扫描流程

#### 发布前

- **全面扫描**: 执行所有类型的扫描
- **修复高危漏洞**: 优先修复严重和高危漏洞
- **生成报告**: 生成发布报告存档

#### 运行时

- **定期扫描**: 定期扫描容器镜像
- **依赖更新**: 定期执行SCA扫描检查依赖更新

### 3. 漏洞处理

#### 优先级排序

1. **严重（Critical）**: 立即修复
2. **高危（High）**: 尽快修复
3. **中危（Medium）**: 计划修复
4. **低危（Low）**: 评估修复
5. **信息（Info）**: 了解即可

#### 修复流程

1. **分析漏洞**: 理解漏洞的影响和原因
2. **评估风险**: 评估实际业务风险
3. **制定方案**: 制定修复方案
4. **执行修复**: 实施修复
5. **验证修复**: 重新扫描验证

### 4. 报告管理

- **定期存档**: 定期生成并保存报告
- **版本对比**: 保留历史版本进行对比
- **合规审计**: 用于安全审计和合规检查

### 5. 性能优化

- **合理并发**: 控制并发扫描数量
- **资源监控**: 监控系统资源使用
- **清理数据**: 定期清理旧扫描结果

## 常见问题

### Q1: 扫描任务一直处于"运行中"状态？

**A**: 可能原因：
- 扫描任务执行时间较长（大项目）
- 扫描器进程异常
- 系统资源不足

**解决方案**:
- 等待一段时间
- 查看后端日志
- 检查系统资源

### Q2: 如何提高扫描速度？

**A**: 
- 排除不必要的目录（如node_modules）
- 使用更具体的扫描规则
- 增加系统资源
- 优化项目结构

### Q3: 扫描结果不准确？

**A**:
- 检查扫描配置是否正确
- 确认项目类型匹配
- 更新扫描规则数据库
- 查看详细错误信息

### Q4: 如何导出扫描数据？

**A**:
- 使用报告功能导出PDF/HTML
- 通过API接口获取JSON数据
- 直接查询数据库（需要数据库权限）

## 快捷键

- **Ctrl/Cmd + K**: 快速搜索
- **Esc**: 关闭对话框
- **F5**: 刷新页面

## 技术支持

如有问题或建议，请联系：

- 技术支持邮箱: support@example.com
- 文档中心: [docs/](docs/)
- GitHub Issues: [repository-url/issues](repository-url/issues)

