# 快速修复Docker Compose超时问题

## 问题

前端容器启动时超时，因为npm install需要较长时间。

## 立即解决方案（在Ubuntu上执行）

### 方法1: 增加超时时间（最简单）

```bash
# 设置超时时间为5分钟
export COMPOSE_HTTP_TIMEOUT=300

# 停止所有服务
docker-compose down

# 重新启动（现在有5分钟超时时间）
docker-compose up -d
```

### 方法2: 分步启动（推荐）

```bash
# 1. 先启动数据库和后端（这些启动快）
docker-compose up -d postgres redis backend

# 2. 等待后端启动
sleep 30

# 3. 单独启动前端（可以看到进度）
docker-compose up -d frontend

# 4. 查看前端日志（确认正在安装依赖）
docker-compose logs -f frontend
```

### 方法3: 如果前端一直失败，手动构建

```bash
# 停止服务
docker-compose down

# 单独构建前端（可以看到详细进度）
docker-compose build frontend

# 然后启动所有服务
docker-compose up -d
```

## 查看进度

```bash
# 查看所有容器状态
docker-compose ps

# 查看前端日志（看看npm install的进度）
docker-compose logs -f frontend

# 如果看到 "Compiled successfully!" 说明启动成功
```

## 如果npm install太慢

可以设置npm镜像（如果在国内）：

```bash
# 进入前端目录
cd ~/projects/anquansaomiao/frontend

# 设置npm镜像
npm config set registry https://registry.npmmirror.com

# 手动安装依赖（这样会更快）
npm install

# 然后启动服务
cd ..
docker-compose up -d
```

