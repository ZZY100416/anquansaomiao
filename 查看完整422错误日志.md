# 查看完整422错误日志

## 已添加的调试日志

我已经在后端添加了日志，会记录：
1. JWT验证失败的具体错误信息
2. 请求头中的Authorization字段

## 立即操作步骤

### 1. 重新构建并重启后端

在Ubuntu上执行：

```bash
# 进入项目目录
cd ~/projects/anquansaomiao

# 重新构建后端（只构建后端，不构建其他服务）
docker-compose build backend

# 重启后端容器
docker-compose restart backend

# 查看后端日志（实时）
docker-compose logs -f backend
```

### 2. 在浏览器中重新登录

1. 清除浏览器缓存（F12 -> Application -> Clear storage）
2. 重新登录（admin/admin123）
3. 观察后端日志输出

### 3. 查看完整的错误日志

在Ubuntu终端中，你应该看到类似这样的日志：

```
uss-backend | ERROR: JWT验证失败: <具体错误信息>
uss-backend | ERROR: 请求头Authorization: <token值或"未找到">
```

### 4. 如果看不到详细日志

执行以下命令查看最近的日志：

```bash
# 查看最近的50行日志，包含ERROR和INFO
docker-compose logs --tail=50 backend | grep -E "ERROR|INFO|JWT|Authorization|dashboard"
```

## 可能的问题

根据日志，可能的原因：

1. **Authorization头未找到**：
   - 前端没有正确发送token
   - 检查前端请求拦截器

2. **Token格式错误**：
   - Token可能不完整或格式错误
   - 检查登录时保存的token

3. **JWT Secret不匹配**：
   - 登录时和后端验证时使用的secret不同
   - 检查环境变量

## 请提供

1. 后端日志中的完整错误信息（特别是"JWT验证失败"那一行）
2. Authorization头的值（如果存在）

这样我就能确定具体问题并给出精确的修复方案。

